---
layout: post
title: gradle build 问题
categories: github
tags: [gradle,idea]
---

#### 今天使用gradle install项目时产生了如下问题:

{% highlight ruby %}
下午8:55:36: Executing task 'install'...

:print-parser:compileJava UP-TO-DATE
:print-parser:processResources UP-TO-DATE
:print-parser:classes UP-TO-DATE
:print-parser:jar UP-TO-DATE
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/AttrWrapper.java:10: ??: ??ASCII???????
 * Time: ??????10:03
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/AttrWrapper.java:10: ??: ??ASCII???????
 * Time: ??????10:03
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/AttrWrapper.java:10: ??: ??ASCII???????
 * Time: ??????10:03
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/AttrWrapper.java:10: ??: ??ASCII???????
 * Time: ??????10:03
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/AttrWrapper.java:10: ??: ??ASCII???????
 * Time: ??????10:03
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/AttrWrapper.java:10: ??: ??ASCII???????
 * Time: ??????10:03
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Layout.java:7: ??: ??ASCII???????
 * Time: ??????10:33
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Layout.java:7: ??: ??ASCII???????
 * Time: ??????10:33
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Layout.java:7: ??: ??ASCII???????
 * Time: ??????10:33
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Layout.java:7: ??: ??ASCII???????
 * Time: ??????10:33
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Layout.java:7: ??: ??ASCII???????
 * Time: ??????10:33
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Layout.java:7: ??: ??ASCII???????
 * Time: ??????10:33
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Page.java:12: ??: ??ASCII???????
 * Time: ??????10:31
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Page.java:12: ??: ??ASCII???????
 * Time: ??????10:31
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Page.java:12: ??: ??ASCII???????
 * Time: ??????10:31
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Page.java:12: ??: ??ASCII???????
 * Time: ??????10:31
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Page.java:12: ??: ??ASCII???????
 * Time: ??????10:31
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/Page.java:12: ??: ??ASCII???????
 * Time: ??????10:31
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:27: ??: ??ASCII???????
 * Time: ??????9:06
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:27: ??: ??ASCII???????
 * Time: ??????9:06
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:27: ??: ??ASCII???????
 * Time: ??????9:06
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:27: ??: ??ASCII???????
 * Time: ??????9:06
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:27: ??: ??ASCII???????
 * Time: ??????9:06
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:27: ??: ??ASCII???????
 * Time: ??????9:06
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
      ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
       ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
        ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
               ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                 ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                  ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                   ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                    ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                     ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                      ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                       ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                        ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                               ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                                ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                                 ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                                  ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:41: ??: ??ASCII???????
    //??????????????????????????????
                                   ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
       ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
        ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
               ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
                ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
                 ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:102: ??: ??ASCII???????
     * ????????????
                  ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
       ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
        ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
               ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
                ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
                 ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:143: ??: ??ASCII???????
     * ????????????
                  ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
       ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
        ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
         ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
             ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
              ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
               ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                 ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                  ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                   ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                    ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                     ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                      ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                       ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                        ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                          ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                           ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                            ^
/Users/zhou/IdeaProjects/template-parser/print-parser/src/main/java/net/sonma/parser/core/POSCommandHandler.java:151: ??: ??ASCII???????
     * ??????????????????:??????????????????
                             ^
:print-parser:javadoc
100 ???
:print-parser:javadoc FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':print-parser:javadoc'.
> Javadoc generation failed. Generated Javadoc options file (useful for troubleshooting): '/Users/zhou/IdeaProjects/template-parser/print-parser/build/tmp/javadoc/javadoc.options'

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED in 1s
4 actionable tasks: 1 executed, 3 up-to-date
Process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/bin/javadoc'' finished with non-zero exit value 1
下午8:55:38: Task execution finished 'install'.

{% endhighlight %}

#### 很明显是因为编码问题,javadoc build使用了ASCII编码,在项目build.gradle中添加:

{% highlight ruby %}
tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

tasks.withType(Javadoc) {
    options.encoding = 'UTF-8'
}
{% endhighlight %}

#### 第一个是设置java编码,第二个是设置javadoc编码.

#### 或
{% highlight ruby %}
[compileJava, compileTestJava, javadoc]*.options*.encoding = 'UTF-8'
{% endhighlight %}

#### 第一个第二个是设置java源码及测试源码编码,第二个是设置javadoc编码.